# Research Contract v1.0（研究契约）中文执行版

> 对应英文原文：[`docs/Research_Contract_v1.0.md`](../Research_Contract_v1.0.md)  
> 上一篇：[`docs/zh/S5_S7_Validation_Playbook_CN.md`](./S5_S7_Validation_Playbook_CN.md) ｜ 下一篇：[`docs/zh/Research_Contract_Implementation_CN.md`](./Research_Contract_Implementation_CN.md)

## 0) 范围与不可妥协项
- 目标：先研究后实现，面向 Freqtrade 合约策略。
- 主场景：Binance USDT 永续；Hyperliquid 仅做适配说明。
- 初始币对：`BTC/USDT:USDT`、`ETH/USDT:USDT`、`SOL/USDT:USDT`。

硬约束：
1. 严禁未来函数（Lookahead）/泄漏（Leakage）/重绘（Repainting）。
2. 每个策略都必须有：多空入场、出场、固定止损、跟踪止损、保护规则、单笔风险预算、并发风险上限。
3. 目标是风险调整后稳健性，不是追求绝对收益最高。
4. 最低可行门槛：PF>1.5 + 对应风格胜率区间 + 对应风格回撤上限。

## 1) 设计原则
- 研究与执行分离：信号有效性与成本/滑点/延迟分开验证。
- 可复现：相同数据+配置必须得出相同结果。
- 可组合：趋势、均值回归、波动、结构、市场状态（Regime）可模块化。
- 风险优先：即使信号好，风控 veto 也可以否决下单。

## 2) 策略分类（Taxonomy）
- 时间层：HFT/MFT/LFT（注意 HFT 是零售K线高频，不是交易所同机房超高频）。
- 风险姿态：保守/进取/激进。
- 3×3 目标表与英文一致（PF、胜率、DD 上限作为目标区间）。

## 3) 因子地图（Factor Map）
- 趋势因子、均值回归因子、波动因子、结构因子、市场状态因子。
- 否决优先级：Regime veto -> Risk veto -> Signal -> Execution gates。
- 反泄漏要求：不用未来K线、不用居中窗口、MTF 只用已收盘高周期。

## 4) 风险与绩效契约
- 单笔风险：保守 0.25%~0.5%，进取 0.5%~0.75%，激进 0.75%~1.0%。
- 并发风险：保守<=1.25%，进取<=2.0%，激进<=3.0%；单币对<=总风险50%。
- 必备出场架构：硬止损 + 跟踪止损 +（可选）时间止损 +（可选）状态翻转止损。
- 晋级门槛（样本外）：PF>1.5，胜率与DD满足对应风格，考虑费率/滑点后期望值仍为正。

## 5) 保护机制契约
必备：
1. 冷却（Cooldown）
2. 止损守卫（StoplossGuard）
3. 低利润币对过滤（LowProfitPairs）

建议：
- 最大回撤保护窗口
- 高波动亏损后锁定币对
- 日级亏损熔断

## 6) 验证协议
- 严格时间切分：Train / Validation / Test。
- 滚动前推：多轮窗口一致性 > 单窗口最优值。
- 稳定性测试：参数扰动、成本压力、延迟代理、单币对与组合对比。
- 接受标准：不脆弱、不依赖单市场状态、不依赖单币对、OOS 退化在可接受带。

## 7) 失效模式清单
逐项检查：滑点敏感、费率拖累、资金费率侵蚀、状态突变、相关性聚集、杠杆与爆仓距离、数据质量缺陷。

## 8) Binance 优先实现说明
- 使用 Freqtrade 合约标准币对格式。
- 回测要包含真实费率/滑点假设。
- 设定最小成交额/成交量门槛。
- LF 风格可加入资金费率惩罚过滤。

## 9) Hyperliquid 适配说明（v1 仅研究）
- 重估费率、滑点、成交机制。
- 重新验证短周期延迟假设。
- 按该交易所重估波动与点差分层。
- 必须完整重跑 walk-forward 与稳定性测试。

## 10) 下一阶段交付（代码阶段门）
本契约签字前不写策略代码。签字后交付：策略模板、共享风控mixin、回测配置包、验证报告模板。

## 11) 签收标准
- A/B/C/D 四块（分类、因子、验证、失败清单）已确认。
- 性能门槛和风险上限被明确接受。
- Binance 主场景与 Hyperliquid 适配范围确认。

## 修正记录
- 与仓库策略/配置命名规则一致；本文件为研究契约，无命令行路径需修正。

### 成功判定
- 团队能依据本文直接进入“可执行研究计划”，并且每个策略都有统一、可审计的门槛定义。

### 失败排查（最常见3项）
1. 契约只写目标，不写硬约束与否决逻辑。
2. 只做IS好看结果，不做OOS多窗口一致性。
3. 未将风险预算与仓位计算绑定。

### 下一步动作
- 进入《Research Contract Implementation》执行命令级落地。
